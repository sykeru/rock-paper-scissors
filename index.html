<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rock-Paper-Scissors</title>
</head>
<body>
    <script>
        choices = ["rock", "paper", "scissors"]

        function getRounds() {
            let rounds = Number(prompt("How many rounds do you want to play?"))
            if (Number.isInteger(rounds)) {
                return rounds
            } else {
                alert("Invalid input!")
                getRounds()
            }
        }

        function getComputerChoice() {
            return choices[Math.floor(Math.random() * 3)]
        }

        function getHumanChoice(roundNumber) {
            let humanChoice = prompt(`Round ${roundNumber} \nChoose your weapon: \n- rock \n- paper \n- scissors`).toLowerCase()
            for (i = 0; i < choices.length; i++) {
                if (humanChoice == choices[i]){
                    return humanChoice
                }
            }

            alert("Invalid choice!")
            getHumanChoice()
        }

        
        function playGame(rounds) { 
            let humanScore = 0
            let computerScore = 0
            let ties = 0
            let status

            function playRound(humanChoice, computerChoice) {
                let round = humanChoice + computerChoice
                if (round == "paperrock" || round == "scissorspaper" || round == "rockscissors") {
                    humanScore++
                    status = "You won"
                } else if (humanChoice == computerChoice) {
                    ties++
                    status = "It's a tie"
                } else {
                    computerScore++
                    status = "You lost"
                }
                
                alert(`${status}! The computer chose ${computerChoice}.`)
            }

            for (let i = 1; i <= rounds; i++) {
                playRound(getHumanChoice(i), getComputerChoice())
                console.log(`Round ${i} - You: ${humanScore}, Computer: ${computerScore}`)
            };

            alert(`You: ${humanScore} \nComputer: ${computerScore} \nTies: ${ties}`)
        };

        playGame(getRounds());

    </script>
</body>
</html>